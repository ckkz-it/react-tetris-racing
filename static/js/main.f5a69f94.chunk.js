(this["webpackJsonpreact-tetris-racing"]=this["webpackJsonpreact-tetris-racing"]||[]).push([[0],{16:function(n,e,t){n.exports=t(24)},21:function(n,e,t){},24:function(n,e,t){"use strict";t.r(e);var r,a,i=t(0),o=t.n(i),c=t(9),u=t.n(c),d=t(4),s=t(3),l=(t(21),t(13)),m=t(5),f=[[[0,1,0],[1,1,1],[0,1,0],[1,0,1]],[[0,1,0],[1,1,1],[1,1,1],[0,1,0],[1,1,1]],[[1,0,1],[1,1,1],[0,1,0],[1,0,1]]];!function(n){n.UP="ArrowUp",n.DOWN="ArrowDown",n.LEFT="ArrowLeft",n.RIGHT="ArrowRight"}(a||(a={}));var p,x=(r={},Object(m.a)(r,a.UP,{x:0,y:-1}),Object(m.a)(r,a.DOWN,{x:0,y:1}),Object(m.a)(r,a.LEFT,{x:-3,y:0}),Object(m.a)(r,a.RIGHT,{x:3,y:0}),r),h=[[[0,0,1],[1,1,1],[1,1,0],[1,0,1]],[[0,1,0],[1,1,0],[1,1,1],[1,0,0]],[[0,0,1],[0,1,1],[1,1,0],[0,1,1]],[[0,1,0],[1,1,1],[1,1,0],[0,1,1]],[[0,1,0],[1,0,1],[0,1,1],[1,0,0]]],b="/img/dark_texture.jpg",g="/img/light_texture.jpg";!function(n){n.LEFT="\u2190",n.UP="\u2191",n.DOWN="\u2193",n.RIGHT="\u2192"}(p||(p={}));var v=function(n,e,t){var r=t.x,a=t.y,i=!0,o=!1,c=void 0;try{for(var u,d=e[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var s=u.value;if(n.pos.x+r===s.pos.x&&(n.pos.y+a>=s.pos.y&&n.pos.y+a<s.pos.y+s.shape.length||n.pos.y+a<=s.pos.y&&n.pos.y+a+n.shape.length>s.pos.y))return s}}catch(l){o=!0,c=l}finally{try{i||null==d.return||d.return()}finally{if(o)throw c}}return null},w=function(){return window.innerWidth<756},y=function(n,e,t,r){var a=Object(i.useState)(Array.from(new Array(18),(function(){return new Array(10).fill(0)}))),o=Object(s.a)(a,2),c=o[0],u=o[1],d=function(n,e,t){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.forEach((function(e,a){e.forEach((function(e,i){a+t.y>=0&&a+t.y<18&&(r?n[a+t.y][i+t.x]=0:0!==e&&(n[a+t.y][i+t.x]=1))}))}))};return Object(i.useEffect)((function(){u((function(r){return function(r){var a=r.map((function(n){return n.map((function(){return 0}))}));return d(a,n.shape,n.pos),e.forEach((function(n){n.y>=0&&n.y<18&&(a[n.y][n.x]=1)})),t.forEach((function(n){return d(a,n.shape,n.pos)})),a}(r)}))}),[n,e,t]),Object(i.useEffect)((function(){null!==r.car&&u((function(e){var t=r.car,a=Object(l.a)(e);d(a,n.shape,n.pos,!0),d(a,t.shape,t.pos,!0);var i=r.iteration%(h.length-1);return d(a,h[i],t.pos),a}))}),[r.car,r.iteration,n]),[c]},O={pos:{x:5,y:13},shape:f[0]},j=function(n,e){var t=Object(i.useRef)();Object(i.useEffect)((function(){t.current=n}),[n]),Object(i.useEffect)((function(){if(null!==e){var n=setInterval((function(){t.current&&t.current()}),e);return function(){return clearInterval(n)}}}),[e])},E=t(1),S=t(2);function z(){var n=Object(E.a)(["\n  position: relative;\n  display: grid;\n  grid-template-rows: repeat(",", calc(25vw / ","));\n  grid-template-columns: repeat(",", 1fr);\n  box-shadow: -20px 14px 28px rgba(0, 0, 0, 0.6), 50px 10px 10px rgba(0, 0, 0, 0.6);\n  border-style: outset;\n  border-bottom-style: inset;\n  border-width: 10px;\n  border-color: #d2ffd6 #c7f1cc #caf4d0 #a0bda4;\n\n  @media screen and (max-width: 756px) {\n    transform: scale(1.2);\n    margin-bottom: 30px;\n    border-width: 8px;\n  }\n\n  @media screen and (max-width: 596px) {\n    transform: scale(1.5);\n    margin-bottom: 50px;\n    border-width: 5px;\n  }\n\n  @media screen and (max-width: 450px) {\n    transform: scale(1.8);\n    margin-bottom: 70px;\n  }\n"]);return z=function(){return n},n}var k=S.a.div(z(),(function(n){return n.height}),(function(n){return n.width}),(function(n){return n.width}));function T(){var n=Object(E.a)(["\n  width: calc(25vw / ",");\n  background-image: url(",");\n  background-size: cover;\n  box-shadow: 1px 1px 10px rgba(65, 103, 67, 0.2);\n"]);return T=function(){return n},n}var I=S.a.div(T(),10,(function(n){return n.type})),H=o.a.memo((function(n){var e=n.type;return o.a.createElement(I,{type:e})}));function P(){var n=Object(E.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  padding: 40px;\n  pointer-events: none;\n  white-space: nowrap;\n  background: #000000;\n  border-radius: 5px;\n  opacity: 0.9;\n  text-align: center;\n\n  @media screen and (max-width: 1200px) {\n    padding: 20px;\n  }\n\n  @media screen and (max-width: 900px) {\n    padding: 10px;\n  }\n\n  @media screen and (max-width: 756px) {\n    padding: 8px;\n  }\n\n  @media screen and (max-width: 596px) {\n    padding: 5px;\n  }\n\n  @media screen and (max-width: 400px) {\n    padding: 3px;\n  }\n"]);return P=function(){return n},n}var R=S.a.div(P()),D=function(n){var e=n.children;return o.a.createElement(R,null,e)};function W(){var n=Object(E.a)(["\n  color: #b90000;\n  font-size: 1.7rem;\n\n  @media screen and (max-width: 900px) {\n    font-size: 1.5rem;\n  }\n\n  @media screen and (max-width: 756px) {\n    font-size: 1.2rem;\n  }\n\n  @media screen and (max-width: 596px) {\n    font-size: 0.7rem;\n  }\n  @media screen and (max-width: 400px) {\n    font-size: 0.5rem;\n  }\n"]);return W=function(){return n},n}var A=S.a.div(W());function G(){var n=Object(E.a)(["\n  color: #cacaca;\n  font-size: 1.5rem;\n\n  @media screen and (max-width: 900px) {\n    font-size: 1.2rem;\n  }\n\n  @media screen and (max-width: 756px) {\n    font-size: 1rem;\n  }\n\n  @media screen and (max-width: 596px) {\n    font-size: 0.6rem;\n  }\n\n  @media screen and (max-width: 400px) {\n    font-size: 0.4rem;\n  }\n"]);return G=function(){return n},n}var L=S.a.div(G());function M(){var n=Object(E.a)(["\n  font-size: 1.1rem;\n  color: #fff;\n\n  @media screen and (max-width: 1200px) {\n    font-size: 1rem;\n  }\n\n  @media screen and (max-width: 900px) {\n    font-size: 0.8rem;\n  }\n\n  @media screen and (max-width: 756px) {\n    font-size: 0.6rem;\n  }\n\n  @media screen and (max-width: 596px) {\n    font-size: 0.5rem;\n  }\n\n  @media screen and (max-width: 400px) {\n    font-size: 0.4rem;\n  }\n"]);return M=function(){return n},n}var N=S.a.div(M()),F=function(n){var e=n.stage,t=n.gameOver,r=n.highScore,a=n.gameStarted,i=e.map((function(n,e){return n.map((function(n,t){return o.a.createElement(H,{key:"".concat(e).concat(t).concat(n),type:0!==n?b:g})}))}));return o.a.createElement(k,{width:10,height:18},i,t&&o.a.createElement(D,null,o.a.createElement(o.a.Fragment,null,o.a.createElement(A,null,"GAME OVER"),o.a.createElement(L,null,"High Score: ",r))),!a&&o.a.createElement(D,null,o.a.createElement(N,null,"Welcome to tetris racing ",o.a.createElement("br",null)," To move car use ",w()?"virtual keyboard":"arrow keys")," "))},U=t(14);function B(){var n=Object(E.a)(["\n  padding: 20px;\n  min-height: 30px;\n  border-radius: 20px;\n  border: 1px solid #333;\n  outline: none;\n  cursor: pointer;\n  font-size: 1rem;\n  background-color: #2d2626;\n  color: #fff;\n  font-family: Tetris, sans-serif;\n  touch-action: manipulation;\n  user-select: none;\n\n  &[disabled] {\n    cursor: default;\n    color: #868485;\n  }\n\n  @media screen and (max-width: 1200px) {\n    padding: 15px;\n    font-size: 0.9rem;\n  }\n\n  @media screen and (max-width: 900px) {\n    padding: 10px;\n    font-size: 0.8rem;\n  }\n\n  @media screen and (max-width: 756px) {\n    font-size: 1.2rem;\n  }\n\n  @media screen and (max-width: 596px) {\n    font-size: 1.1rem;\n  }\n"]);return B=function(){return n},n}var C=S.a.button(B()),J=function(n){var e=n.callback,t=n.text,r=Object(U.a)(n,["callback","text"]);return o.a.createElement(C,Object.assign({onClick:e},r),t)};function K(){var n=Object(E.a)(["\n  display: flex;\n  align-items: center;\n  padding: 20px;\n  border: 4px solid #333;\n  min-height: 30px;\n  border-radius: 20px;\n  color: #999;\n  background: #000;\n  font-size: 1.1rem;\n\n  @media screen and (max-width: 1200px) {\n    padding: 15px;\n  }\n\n  @media screen and (max-width: 900px) {\n    padding: 10px;\n    font-size: 1rem;\n  }\n\n  @media screen and (max-width: 756px) {\n    font-size: 1.3rem;\n  }\n\n  @media screen and (max-width: 596px) {\n    font-size: 1.2rem;\n  }\n"]);return K=function(){return n},n}var _=S.a.div(K()),V=function(n){var e=n.text;return o.a.createElement(_,null,e)};function $(){var n=Object(E.a)(["\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  padding-top: 50px;\n\n  @media screen and (max-width: 756px) {\n    padding-top: 70px;\n  }\n\n  @media screen and (max-width: 596px) {\n    padding-top: 90px;\n  }\n"]);return $=function(){return n},n}var q=S.a.div($());function Q(){var n=Object(E.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-left: 50px;\n  width: 15%;\n\n  button,\n  div {\n    margin-bottom: 20px;\n  }\n\n  @media screen and (max-width: 756px) {\n    width: 100%;\n    margin: 50px 50px 0 50px;\n\n    button,\n    div {\n      margin-bottom: 10px;\n    }\n  }\n"]);return Q=function(){return n},n}var X=S.a.aside(Q());function Y(){var n=Object(E.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  text-align: center;\n"]);return Y=function(){return n},n}var Z=S.a.div(Y());function nn(){var n=Object(E.a)(["\n  display: flex;\n  margin: 0 !important;\n  width: 100%;\n"]);return nn=function(){return n},n}function en(){var n=Object(E.a)(["\n  border: 1px solid #252525;\n  color: #252525;\n  padding: 5px;\n  background-color: #808088;\n  width: 100%;\n  margin: 0 !important;\n  outline: none;\n  font-size: 1.4rem;\n  font-weight: bold;\n  touch-action: manipulation;\n  user-select: none;\n"]);return en=function(){return n},n}var tn,rn=S.a.button(en()),an=S.a.div(nn()),on=function(n){var e=n.direction,t=n.onPress;return o.a.createElement(rn,{onClick:t},e)},cn=function(n){var e=n.onKeyDown;return o.a.createElement(Z,null,o.a.createElement(an,null,o.a.createElement(on,{direction:p.UP,onPress:function(){return e(a.UP)}})),o.a.createElement(an,null,o.a.createElement(on,{direction:p.LEFT,onPress:function(){return e(a.LEFT)}}),o.a.createElement(on,{direction:p.DOWN,onPress:function(){return e(a.DOWN)}}),o.a.createElement(on,{direction:p.RIGHT,onPress:function(){return e(a.RIGHT)}})))},un=function(){var n=Object(i.useState)(null),e=Object(s.a)(n,2),t=e[0],r=e[1],a=Object(i.useState)(0),c=Object(s.a)(a,2),u=c[0],l=c[1],m=Object(i.useState)([]),p=Object(s.a)(m,2),h=p[0],b=p[1],g=Object(i.useState)([]),E=Object(s.a)(g,2),S=E[0],z=E[1],k=Object(i.useState)({car:null,iteration:0}),T=Object(s.a)(k,2),I=T[0],H=T[1],P=Object(i.useState)(!1),R=Object(s.a)(P,2),D=R[0],W=R[1],A=Object(i.useState)(0),G=Object(s.a)(A,2),L=G[0],M=G[1],N=Object(i.useState)(!1),U=Object(s.a)(N,2),B=U[0],C=U[1],K=function(){var n=Object(i.useState)(Object(d.a)({},O)),e=Object(s.a)(n,2),t=e[0],r=e[1];return[t,function(n){var e=n.x,t=n.y;r((function(n){return Object(d.a)({},n,{pos:{x:n.pos.x+e,y:n.pos.y+t}})}))},function(){r(Object(d.a)({},O))}]}(),_=Object(s.a)(K,3),$=_[0],Q=_[1],Y=_[2],Z=y($,S,h,I),nn=Object(s.a)(Z,1)[0],en=function(){var n=Object(i.useState)(0),e=Object(s.a)(n,2),t=e[0],r=e[1];return[t,r,function(){var n=window.localStorage.getItem("tetrisHighScore");return n?Number(n):0},function(){var n=window.localStorage.getItem("tetrisHighScore");n?Number(n)<t&&window.localStorage.setItem("tetrisHighScore",t.toString()):window.localStorage.setItem("tetrisHighScore",t.toString())},function(){window.localStorage.removeItem("tetrisHighScore"),r(0)}]}(),rn=Object(s.a)(en,5),an=rn[0],on=rn[1],un=rn[2],dn=rn[3],sn=rn[4],ln=function(n){tn&&clearTimeout(tn),tn=setTimeout((function(){!function(n){var e=x[n];if(null!==t&&!D&&!function(n,e,t){var r=t.x,a=t.y;return(n.pos.x+r+n.shape[0].length>10||n.pos.x+r<0||n.pos.y+a+n.shape.length+1>18||n.pos.y+a-1<0)}($,0,e)){var r=v($,h,e);r?mn(r):Q(e)}}(n)}),5)},mn=function(n){W(!0),H({car:n,iteration:0}),dn()},fn=function(){var n,e,t,r=h.filter((function(n){return n.pos.y<18})).map((function(n){return Object(d.a)({},n,{pos:Object(d.a)({},n.pos,{y:n.pos.y+1})})})),a=r[r.length-1];(0===r.length||L%(e=8,t=10,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e)===0&&a.pos.y>4)&&(n=f[0],r.push({shape:n,pos:{x:Math.random()>.5?5:2,y:-3}}));b(r)};return j((function(){l((function(n){return n+1}))}),D?null:1e3),j((function(){!function(){var n=S.filter((function(n){return n.y<18})).map((function(n){return Object(d.a)({},n,{y:n.y+1})}));L%4===0&&(n=n.concat([{x:0,y:-1},{x:0,y:-2},{x:0,y:-3},{x:9,y:-1},{x:9,y:-2},{x:9,y:-3}])),z(n)}(),fn(),M((function(n){return n+1})),null!==t&&0!==u&&u%30===0&&r(t/1.1);var n=v($,h,{x:0,y:-1});n?mn(n):on((function(n){return Math.floor(n+1e3/t*10)}))}),D?null:t),j((function(){H((function(n){return Object(d.a)({},n,{iteration:n.iteration+1})}))}),D&&I.iteration<10?70:null),window.addEventListener("keydown",(function(n){0!==L&&n.key in x&&(n.preventDefault(),ln(n.key))})),o.a.createElement(q,null,o.a.createElement(F,{stage:nn,gameOver:D&&10===I.iteration,highScore:un(),gameStarted:B}),o.a.createElement(X,null,w()&&o.a.createElement(cn,{onKeyDown:function(n){return ln(n)}}),o.a.createElement(V,{text:"Score: ".concat(an)}),D&&un()&&10===I.iteration&&o.a.createElement(J,{callback:function(){return sn()},text:"Reset High Score"}),!B&&o.a.createElement(J,{callback:function(){return r(400),void C(!0)},text:"Start Game"}),B&&o.a.createElement(J,{callback:function(){return!D&&r(t?null:400)},text:null===t?"Resume":"Pause",disabled:D}),D&&10===I.iteration&&o.a.createElement(J,{callback:function(){return W(!1),H({car:null,iteration:0}),M(0),on(0),l(0),Y(),r(400),b([]),void z([])},text:"Restart"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(o.a.createElement(un,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.f5a69f94.chunk.js.map